// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Modelo de Usuário
model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  password  String   // Senha hash
  
  // SQLite não suporta Enum, então usamos String.
  // Valores esperados: "ADMIN" ou "FUNCIONARIO"
  role      String   @default("FUNCIONARIO")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  properties Property[]

  @@map("users")
}

// Modelo de Imóvel
model Property {
  id          String   @id @default(cuid())
  
  titulo      String
  descricao   String
  tipo        String
  
  // SQLite suporta Decimal, mas sem a configuração de precisão (@db.Decimal)
  preco       Decimal 
  
  cidade      String
  bairro      String
  endereco    String?
  
  quarto      Int      @default(0)
  banheiro    Int      @default(0)
  garagem     Int      @default(0)
  area        Float
  
  // SQLite não aceita listas (String[]). 
  // Vamos salvar como String única (Ex: "url1;url2;url3")
  fotos       String   @default("") 
  
  // Valores esperados: "PENDENTE", "DISPONIVEL", "VENDIDO", "RESERVADO"
  status      String   @default("PENDENTE")
  destaque    Boolean  @default(false)

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  corretorId  String
  corretor    User     @relation(fields: [corretorId], references: [id])

  @@map("properties")
}